(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{846:function(_,v,t){"use strict";t.r(v);var a=t(18),s=Object(a.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"前端工程化提效新思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端工程化提效新思路"}},[_._v("#")]),_._v(" 前端工程化提效新思路")]),_._v(" "),t("p",[t("strong",[_._v("目录")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("前言")])]),_._v(" "),t("li",[t("p",[_._v("目标")])]),_._v(" "),t("li",[t("p",[_._v("分析")])]),_._v(" "),t("li",[t("p",[_._v("方案设计——页面如何可视化及代码生成")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("问题分析")])]),_._v(" "),t("li",[t("p",[_._v("提出想法")])]),_._v(" "),t("li",[t("p",[_._v("方案设计")])]),_._v(" "),t("li",[t("p",[_._v("方案验证")])])])]),_._v(" "),t("li",[t("p",[_._v("方案设计——组件间/页面间数据通信")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("问题分析")])]),_._v(" "),t("li",[t("p",[_._v("提出想法")])]),_._v(" "),t("li",[t("p",[_._v("方案设计")])]),_._v(" "),t("li",[t("p",[_._v("方案验证")])])])]),_._v(" "),t("li",[t("p",[_._v("总结")])])]),_._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[_._v("#")]),_._v(" 前言")]),_._v(" "),t("p",[_._v("什么是 Mis 系统?")]),_._v(" "),t("blockquote",[t("p",[_._v("Mis 全称为 Management Information System; 由人、计算机及其他外围设备等组成的能进行信息的收集、传递、存贮、加工、维护和使用的系统，通常是对信息实现权限管理/增删改查。")])]),_._v(" "),t("p",[_._v("为什么要进行 Mis 系统开发提效？")]),_._v(" "),t("blockquote",[t("p",[_._v("随着团队"),t("strong",[_._v("业务的增长")]),_._v("，"),t("strong",[_._v("合规")]),_._v(" 及 "),t("strong",[_._v("团队工程化")]),_._v("带来的"),t("strong",[_._v("管理诉求加大")]),_._v("，需要大量的 Mis 系统进行支撑。")])]),_._v(" "),t("p",[_._v("现在的研发流程是怎样的？")]),_._v(" "),t("p",[_._v("在日常的 Mis 系统开发过程中，前端同学在接到业务需求到需求上线时大多需要进行如下几个步骤(以 vue 框架为例)：")]),_._v(" "),t("blockquote",[t("p",[_._v("需求分析 -> 项目创建 -> 环境配置 -> 已有 ui 库引入 -> 代码编写 -> 联调测试 -> 打包 -> 发布部署 -> 监控")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerZh4ewMWu1N9SZ6X9gS0kBScFqvQicBsb2yoRr5DQZF3RQbSTJibNzWqQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("enter image description here")]),_._v(" "),t("p",[_._v("其中 "),t("strong",[_._v("项目创建/环境配置/项目打包/发布")]),_._v("：可以通过团队脚手架将能力内置/统一；无需手动处理；前端同学更多需要关心的部分是: "),t("strong",[_._v("契约的确定，前端代码的编写")]),_._v("。")]),_._v(" "),t("p",[_._v("能够快速生成前端页面市面上有很多解决方案:")]),_._v(" "),t("ol",[t("li",[t("strong",[_._v("低代码工具快速建站")]),_._v(": 通过在线/GUI 工具让用户进行页面配置，系统自动生成页面; 代表为 mendix/salesforce/微搭/无极等")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("优点: 门槛低，建站快;")])]),_._v(" "),t("li",[t("p",[_._v("缺点: . 低代码平台能够解决 80%较为简单的场景，剩余的 20%较为复杂的场景，需要开发者使用平台提供的 api 进行功能扩展， . "),t("strong",[_._v("不直接生成前端代码")]),_._v(",要进行功能扩展需要熟悉平台的一系列规则,造成前端不想用后端不会用的尴尬局面; 若后续低代码平台不维护则又要面临项目重构。")])])]),_._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("strong",[_._v("基于场景的模块化定制")]),_._v(": 针对特定场景，部分同学封装通用组件，开放出配置项，其余同学引入组件进行配置，可达到快速产生页面效果的目的。代表有: 明道云")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("优点: . 部分前端同学无需关心组件如何实现，直接使用对应的配置，即可快速完成部分需要的开发;")])]),_._v(" "),t("li",[t("p",[_._v("缺点: . 适用于部分业务场景，组件臃肿庞大 . 通用性和灵活性很难权衡 . 开发需要对场景特别了解")])])]),_._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("strong",[_._v("基于纯 DSL 进行配置")]),_._v(": 通过 JSON 配置就能生成各种页面。代表为: 百度 amis")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("优点: 可通过 json/dsl 快速搭建出页面，不需要懂前端，不收前端技术影响")])]),_._v(" "),t("li",[t("p",[_._v("缺点: . 需要学习另外一套语法，有成本 . 灵活性相对不足")])])]),_._v(" "),t("hr"),_._v(" "),t("h2",{attrs:{id:"目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[_._v("#")]),_._v(" 目标")]),_._v(" "),t("p",[_._v("所以，有没有一种可能: "),t("strong",[_._v("与传统前端开发无异的，不追求完全线上化操作的，快速生成可二次编辑代码的，工程化工具")]),_._v("，来进行开发提效；")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("与传统开发无异")]),_._v(": 前端同学无需学习额外的语法，通过工具快速生成前端页面的代码(页面代码，属性配置，路由配置，vuex 编写，监控接入等);")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("不完全线上化操作")]),_._v(": 对于常规的操作(项目创建，环境配置，打包，发布,及组件支持的属性配置等)可以通过可视化的方式进行配置，对于工具不满足的情况，可以拉下代码自己开发;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("可二次开发")]),_._v("：前端无额外的学习成本，即可快速对生成的代码进行二次修改(如果功能不满足的情况下)")])])]),_._v(" "),t("p",[_._v("目标群体及使用方式(基于已创建项目的前提下):")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("For 前端同学: 可以使用工具快速生成前端代码进行应用开发，对于简单的场景甚至不需要二次开发;")])]),_._v(" "),t("li",[t("p",[_._v("For 后端同学: 对于 Mis 系统而言，大多是表单，表格及图表类展示，后端同学可以使用前端同学提供的组件通过可视化的方式快速搭建页面，对于较为复杂的场景可以扩展组件或者二次开发;")])])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHercz2dlI9xw9OOHdGjwLRL87sY789ZYAWP7yFmf9bHANOolAshskcrCA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("h2",{attrs:{id:"分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[_._v("#")]),_._v(" 分析")]),_._v(" "),t("p",[_._v("围绕着上面的目标，建设一个如上的工程化工具，主要需要解决 2 个问题:")]),_._v(" "),t("ol",[t("li",[t("strong",[_._v("前端同学常写的代码由哪些部分组成?")])])]),_._v(" "),t("p",[_._v("除开项目创建，环境配置，打包发布，等；仅分析前端编写代码部分；我们发现"),t("strong",[_._v("主要")]),_._v("由四部分组成:")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("数据源")]),_._v(": 针对 Mis 系统，没有数据的页面是没有灵魂的，数据通常包括：http 数据，url 参数，localstorage,cookie,等;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("页面")]),_._v(": 编写 vue 组件，页面用于展示内容，通常我们基于 vue/react/angular 等框架并结合 UI 组件库(tdesign,element-ui,ant-design,iview)快速构建出 UI;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("通信")]),_._v(": 页面/组件之间可能需要进行数据通信;比如上面通过输入框输入用户名下面需要实时展示出来;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("事件")]),_._v(": 事件是我们在编程时系统内发生的动作或者发生的事情; 比如点击页面上的按钮弹窗展示")])])]),_._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("strong",[_._v("如何抽象代码部分，并通过可视化的方式快速生成代码？")])])]),_._v(" "),t("p",[_._v("如何对数据源，页面，通信及事件，进行抽象，达到既能通过可视化的方式创建页面，管理数据，管理事件，又能直接转换落地到真实的代码的目的；")]),_._v(" "),t("p",[_._v("由于篇幅有限本文将着重先讲：")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("页面如何可视化及代码生成")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("如何进行组件间通信")])])])]),_._v(" "),t("p",[_._v("数据源及事件部分可能留在下篇文章进行阐述。")]),_._v(" "),t("h2",{attrs:{id:"方案设计-页面如何可视化及代码生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案设计-页面如何可视化及代码生成"}},[_._v("#")]),_._v(" 方案设计——页面如何可视化及代码生成")]),_._v(" "),t("h3",{attrs:{id:"问题分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题分析"}},[_._v("#")]),_._v(" 问题分析")]),_._v(" "),t("p",[_._v("由于我们这边是 Vue 技术栈，本文暂以 Vue2.x 为例讲述如何进行代码生成及可视化操作;")]),_._v(" "),t("p",[_._v("要生成 Vue 代码，首先的明白 Vue 代码模板转换到视图的过程及代码有那几部分组成：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerhrrJ2Tqz9lPibkSsHQlyLbCwLl2NV8nBGcvHu7fOH2t6ws4RY9l4Scw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerBLNubrdvOoqlhNK5rAticrHk86ktBp8X2BpOAgRfKr10qQFGlyvnheQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("我们的主要目的是生成 template 部分代码，所以可以尝试着反向查阅 template 编译成 render 函数的过程，代码主要有那几部分组成；方便代码即可转换成 template 又可转换成 render 函数(根据用户需求)。从渲染函数中我们发现代码主要需要三个部分:")]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("标签名")]),_._v(" ：声明使用什么类型的组件")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("属性")]),_._v("：组件属性的配置，属性分为静态属性及动态属性")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("子节点")]),_._v("：子项中分为 children 及 slot，children 其实是 slot default，所以我们可以将 children 归并为 slot")])])]),_._v(" "),t("h3",{attrs:{id:"提出想法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提出想法"}},[_._v("#")]),_._v(" 提出想法")]),_._v(" "),t("p",[_._v("由此我们尝试设计一种 schema 去描述页面:")]),_._v(" "),t("p",[t("code",[_._v("export interface PageUISchemaType { // ... // 组件类型，比如使用t-input组件那么type就为t-input type: string; // 版本 version?: string; // 组件属性 props?: SchemaBasePropType; // vue插槽部分 slots?: { [key: string]: PageUISchemaType[], }; // ... }")])]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("type")]),_._v(" : 组件类型，比如我们使用了 tdesign 中的 t-input 组件，那么 type 就为 t-input,渲染到 vue template 中也就是"),t("code",[_._v("<t-input></t-input>")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("props")]),_._v(": 属性分为静态属性和动态属性")])]),_._v(" "),t("li",[t("p",[_._v("静态属性: 可直接传入对应的值: 比如下面的 "),t("code",[_._v("userName")]),_._v("为"),t("code",[_._v("alex")]),_._v(";")])]),_._v(" "),t("li",[t("p",[_._v("动态属性: 由于数据存在动态情况，此处的"),t("code",[_._v("$page.data")]),_._v("相当于一个简写获取当前页面组件中的"),t("code",[_._v("data/computed")]),_._v("的值;"),t("code",[_._v("$global.data")]),_._v("相当于获取 vuex 中的值;")])])]),_._v(" "),t("p",[t("code",[_._v('{ "props": { "userName": "alex", ":age": "$page.data.age" } }')])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("slots")]),_._v(": vue 插槽分为默认插槽,具名插槽及作用域插槽，我们主要采用了具名插槽的方式，融合了默认插槽。")])]),_._v(" "),t("p",[t("code",[_._v("{ // key表示查查名称，插槽默认可层级嵌套多个组件 [key: string]: PageUISchemaType[], }")])]),_._v(" "),t("p",[_._v("使用如上的 schema 描述，是否能够实现编辑器在线编辑及代码生成？")]),_._v(" "),t("h3",{attrs:{id:"方案设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案设计"}},[_._v("#")]),_._v(" 方案设计")]),_._v(" "),t("p",[_._v("首先我们来明确一下可视化编辑器及代码生成的关系: 理论上来讲:")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("可视化编辑器创造 schema 同时又使用 schema 进行在线预览")])]),_._v(" "),t("li",[t("p",[_._v("本地代码可以通过 schema 转换而成，又可以转换成 schema")])])]),_._v(" "),t("p",[_._v("但是事实上，考虑到"),t("strong",[_._v("本地编写代码灵活性过高，造成可控性较低")]),_._v("的原因， /暂时不考虑代码反解析成 schema ;")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerQVnbmP54ehPCadHyLu1GD7o2ByHrnCLbCXsle0nQvicbxQzRu6CejVw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("h4",{attrs:{id:"可视化如何构造-schema-并渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可视化如何构造-schema-并渲染"}},[_._v("#")]),_._v(" 可视化如何构造 schema 并渲染")]),_._v(" "),t("p",[t("strong",[_._v("1. 新增 schema")]),_._v("：其大致结构如下：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHernxAHcS5bGb6iaM7icLfL6WqDLVAEyreXoGwR6s807UJYF9kzwGVz0Zmg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("编辑器中组件新增的来源有三种：")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("布局层下新增组件，可以使用左侧拖动(draggable)的方式注入组件；")])]),_._v(" "),t("li",[t("p",[_._v("如果存在接口(数据源)可以自动填充对应组件的插槽内容;")])]),_._v(" "),t("li",[t("p",[_._v("对于可自定义插槽部分，可以选择要填充的组件")])])]),_._v(" "),t("blockquote",[t("p",[_._v("tips: 为什么没有设计所有的组件都支持拖动方式，主要考虑因素为过于灵活的拖动会造成页面不可控")])]),_._v(" "),t("p",[t("strong",[_._v("2. 删除 schema 及修改 schema")]),_._v(": 如上图所示，对于组件外层存在一个虚拟组件，当点击选择对应组件时可以进行事件拦截，"),t("strong",[_._v("获取到选中组件的 id 或者路径")]),_._v("，获取到路径之后可以直接删除 schema 对象;其次对于组件 schema 的修改，比如属性配置同样是基于选中某个组件的情况下，"),t("strong",[_._v("持有当前 schema 的引用")]),_._v("，然后对属性进行修改。")]),_._v(" "),t("p",[t("strong",[_._v("3 编辑器渲染 schema")]),_._v(":")]),_._v(" "),t("p",[_._v("下面我们来聊聊可视化编辑器如何利用 schema 进行渲染:")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHeroA66dRRLglopCq6ibHvEIgpJlKwXpoEgHMPMsIYdT1ycMluKicsTjkzw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("ul",[t("li",[t("p",[_._v("数据准备阶段：当编辑器中新增了未被注册的组件，需要先进行全局注册")])]),_._v(" "),t("li",[t("p",[_._v("渲染阶段：其核心主要利用 vue 自带的动态渲染能力"),t("code",[_._v('<component is="" />')]),_._v("，将配置的属性进行进入；如果存在子组件则声明插槽并循环渲染")])])]),_._v(" "),t("p",[_._v("可视化编辑的目的是构造 schema,对于用户的交互是需要依赖于生成的代码，所以在可视化编辑阶段将事件进行拦截，暂不提供交互；如果需要预览可以切换到预览模式。")]),_._v(" "),t("h4",{attrs:{id:"schema-转换成-vue-代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#schema-转换成-vue-代码"}},[_._v("#")]),_._v(" schema 转换成 vue 代码")]),_._v(" "),t("p",[_._v("在转 vue 代码前，我们先思考一下如果写一个页面，常常需要编写那几部分内容:")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("新建一个 vue 文件，编写 template,script 及 style 部分；处理组件静态属性配置，处理组件动态属性配置")])]),_._v(" "),t("li",[t("p",[_._v("编写路由，将上述创建的文件传递给 vue-router")])]),_._v(" "),t("li",[t("p",[_._v("如果存在跨组件/跨页面通信的情况可能会编写 vuex,")])])]),_._v(" "),t("blockquote",[t("p",[_._v("本篇暂不讲述数据源及事件部分代码编写")])]),_._v(" "),t("p",[_._v("回到上面的 schema 描述")]),_._v(" "),t("p",[t("code",[_._v("export interface PageUISchemaType { // ... // 组件类型，比如使用t-input组件那么type就为t-input type: string; // 版本 version?: string; // 组件属性 props?: SchemaBasePropType; // vue插槽部分 slots?: { [key: string]: PageUISchemaType[], }; // ... }")])]),_._v(" "),t("p",[_._v("我们的方案是:")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerlWeIQVK7jFLeGpsdjZWucp7icqiaIaBrdO6r95Heic93FdoTKBYYGUVnQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("主要设计四大部分:")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("生成前代码准备：注册所需组件")])]),_._v(" "),t("li",[t("p",[_._v("生成 vue 页面代码，包括 tempale 及 script 代码部分；")])]),_._v(" "),t("li",[t("p",[_._v("生成页面路径：通过解析路由文件得到 ast 并转换注入对应的页面路径")])]),_._v(" "),t("li",[t("p",[_._v("生成 vuex 代码：如果存在跨组件或者页面通信的话，会创建对应的 module 并生成 typescript 的 Interface/state/mutation 等;其次会将 module 注入到 vuex 入口文件中")])])]),_._v(" "),t("h3",{attrs:{id:"方案验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案验证"}},[_._v("#")]),_._v(" 方案验证")]),_._v(" "),t("p",[_._v("方案设计部分讲到了 可视化编辑器渲染 schema 及 vue 代码生成：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerJbYmudOJoMCSQoPrRicOwQRIxCWib5KxndllqrLfvFxNzSduV04TwUzw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("路由及 vuex 部分代码如下：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerdUHNjNByVmfWIZKZjljnPbfTkCYxq3VPcxhU5tQIiaPY5dUdptlpdBg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("hr"),_._v(" "),t("h2",{attrs:{id:"方案设计-组件间-页面间数据通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案设计-组件间-页面间数据通信"}},[_._v("#")]),_._v(" 方案设计——组件间/页面间数据通信")]),_._v(" "),t("h3",{attrs:{id:"问题分析-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题分析-2"}},[_._v("#")]),_._v(" 问题分析")]),_._v(" "),t("p",[_._v("在前端开发中，大多数情况下组件是不太需要和其他组件进行通信的，组件通信一般应用在:")]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("页面需要进行数据联动")]),_._v(": 比如实时再另外部分展示用户输入内容")])]),_._v(" "),t("li",[t("p",[_._v("需要进行"),t("strong",[_._v("层级数据传递")])])])]),_._v(" "),t("h3",{attrs:{id:"提出想法-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提出想法-2"}},[_._v("#")]),_._v(" 提出想法")]),_._v(" "),t("p",[_._v("在 vue 中进行数据通信的方式有很多，比如:")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("provide/inject")])]),_._v(" "),t("li",[t("p",[_._v("props/emit")])]),_._v(" "),t("li",[t("p",[_._v("vuex")])]),_._v(" "),t("li",[t("p",[_._v("eventbus")])]),_._v(" "),t("li",[t("p",[_._v("attrs/listeners")])]),_._v(" "),t("li",[t("p",[_._v("等")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerRNWa7cUneHXaUvpjVfpDvA8VsktPnMicHQ47JRdKXVm0mlDyVKEgicQg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})])])]),_._v(" "),t("p",[_._v("从独立性，简易性，可维护性，可扩展性及功能满足程度五个方面，对比后我们发现")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("基于"),t("strong",[_._v("props")]),_._v("进行"),t("strong",[_._v("父子间数据通信")]),_._v("是最有效的方法")])]),_._v(" "),t("li",[t("p",[_._v("vuex 较为适合跨组件进行通信及全局状态管理")])])]),_._v(" "),t("h3",{attrs:{id:"方案设计-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案设计-2"}},[_._v("#")]),_._v(" 方案设计")]),_._v(" "),t("p",[_._v("思路：利用 props 实现组件间通信，使用 vuex 实现跨组件/页面间通信")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerPRfiahFYWds957LfibpoKrr92S9icicSt5mSvESJnmaPibYVEo0JAAkwMdg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("enter image description here")]),_._v(" "),t("p",[_._v("/挑战 1：组件如何进行 props "),t("strong",[_._v("动态数据绑定")]),_._v("?/")]),_._v(" "),t("blockquote",[t("p",[_._v("前面已经讲过，对于动态的属性我们采用 "),t("strong",[_._v(":")]),_._v(" 号开头区分是否动态属性")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHer20WFe8biaBL8Nib7sjK5RQh9XndxTrAzpa7rerCX4AFccQdkqgWkO20g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("enter image description here")]),_._v(" "),t("p",[_._v("/挑战 2：拦截组件的 set，需要对组件进行递归处理 Proxy 且具有响应式，对前端而言为一个黑盒；/ （与传统开发具有一定差异）")]),_._v(" "),t("p",[_._v("/挑战 3："),t("strong",[_._v("vuex 如何与页面进行绑定")]),_._v("(上述的$page.data 如何转化成真实可执行的代码)?/ 想法: "),t("strong",[_._v("实现一个类似于 vuex mapState 的功能")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("动态数据的"),t("strong",[_._v("获取")]),_._v("：利用计算属性绑定并监听 state 的值")])]),_._v(" "),t("li",[t("p",[_._v("动态数据的"),t("strong",[_._v("修改")]),_._v("：通过提交 commit 给 mutation；"),t("strong",[_._v("通过这种方式与传统开发 获取 state 值，修改 state 值无异")]),_._v("，前端同学理解成本较低(解决了挑战 2)")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerM26SlvSkqYMNS1VvZrRNMHIWmxcbMWiaQ9OKxtY9DLVcx4N1GMCt5gg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})])])]),_._v(" "),t("p",[t("strong",[_._v("方案完善")]),_._v("基于上面的实现思路重新整理了方案:")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHer0ibmPXIMN3W3jDFYsBXAOugvEVCjbgb4x86KQepfkAgGnH07iboBYv4w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("h3",{attrs:{id:"方案验证-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方案验证-2"}},[_._v("#")]),_._v(" 方案验证")]),_._v(" "),t("p",[_._v("我们还是基于上一部分生成的页面代码进行验证: 内容输入:")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHerphxkSYEuA9j4rRg2U9AomjVK3XKMX5zNWd9RprA2ZpACPQoaPlk7Hw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHer7EeVIviaiaeXtguW0icgGZuD9EQLD1SibDHrAjsIjuhITMu2bBIJuEicnRQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("p",[_._v("vuex 数据更新:")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/Fa3Cl4XzuYtXQuPdhlCxnn9kvEYRPHer9SCDKnzH6DAKticlkIcyBsW0W4S4MHbvTRyGwYN4rQS4DO0J7a2YHlw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"图片"}})]),_._v(" "),t("hr"),_._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[_._v("#")]),_._v(" 总结")]),_._v(" "),t("p",[_._v("进行前端开发页面提效的方式有很多种:")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("低代码")])]),_._v(" "),t("li",[t("p",[_._v("基于模块化的配置开发")])]),_._v(" "),t("li",[t("p",[_._v("基于纯 DSL 开发")])]),_._v(" "),t("li",[t("p",[_._v("代码快速生成")])]),_._v(" "),t("li",[t("p",[_._v("招聘 10+同学")])]),_._v(" "),t("li",[t("p",[_._v("等等")])])]),_._v(" "),t("p",[t("strong",[_._v("不同的业务场景，不同的业务需求，不管是哪一种方式能够再实际工作中帮助大家提效就是相对最有效的方法。")]),_._v("   本文主要基于 代码生成的方式 进行提高效能；当然也不能 100%的覆盖所有的场景，因为场景一直是变化的。但个人理解，基于代码快速生成有如下几个优点：")]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("学习成本低")]),_._v("，无需掌握额外的技能知识(比如平台的 api 等);")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("可扩展性强")]),_._v("，因为基于代码生成，对于不满足需求的，前端同学可以进行二次开发;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("上手快")]),_._v("，通过提供可视化的方式(可视化只是一种选择)抹平技术差异，让前后端同学都可以快速搭建页面；对于不能满足业务场景的需求，可以扩展基础组件或者基于已生成的代码进行扩展;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("可维护性高")]),_._v("，整个项目的代码是可见的，和部分低代码平台代码封闭的区别在于，较少的使用工具的 api，尽可能将业务代码还给业务；假若有一天工具不维护，对于项目而言和传统需求开发无异，无需重构/迁移;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("效能相对较高")]),_._v("，对于任何一个工具/平台而言，能否快速搭建出页面，其中一个关键点在于页面的构成元素(比如: 表格，表单，图表)的功能支持 是否相对丰富；")])])]),_._v(" "),t("blockquote",[t("p",[_._v("个人理解: "),t("strong",[_._v("对于 Mis 场景的页面应该是有那些功能相对丰富的元素/模块进行组合而成")]),_._v("，而不是过于灵活的从 0 开始搭建（比如：一个页面直接拖入一个表格/表单 会比用户逐个拖入输入框来的简单高效） ；其"),t("strong",[_._v("次对于固化的场景快速填充内容也是不错的选择")]),_._v("（比如：后端同学有一个表单提交的需求，他已有了一个接口，比较好的方式是利用他提供的接口快速生成表单内容，若样式不满足需求可以适当进行微调，而不是让他逐个拖入表单/表单项/输入框/单选 等）")])]),_._v(" "),t("p",[_._v("由于篇幅优先本文先讲述了：UI 代码生成 及 组件/页面将数据通信；对于数据源及事件部分下面文章将会注意阐述。回到本文提出的技术方案大致思路:")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("UI 代码生成")]),_._v(": 可视化编辑器使用 schema 渲染并生成 schema,工具根据 schema 生成前端代码；其主要利用 vue render 的结构去生成 template 部分，由于静态属性较多通过 id 进行统一绑定；动态属性部分通过"),t("code",[_._v("$page.data")]),_._v("获取当前页面的"),t("code",[_._v("data")]),_._v("的值;其中还包括 动态属性获取/修改，路由注册等;")])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("数据通信")]),_._v(": 父子间通信使用"),t("code",[_._v("props/emit")]),_._v(",跨组件通信使用"),t("code",[_._v("vuex")]),_._v("，实现了类似于"),t("code",[_._v("mapState")]),_._v("的功能"),t("code",[_._v("mapPageState")]),_._v("，具有有传统 vuex 开发一样的方式,"),t("code",[_._v("computed")]),_._v("中获取，使用"),t("code",[_._v("commit")]),_._v("方式修改 state")])])]),_._v(" "),t("p",[_._v("设计方案的原始初心是：不额外引入新的技术栈/框架，利用现有的能力去快速生成页面进行提效。其方案可能有部分考虑不周/不当，欢迎大家指正！")])])}),[],!1,null,null,null);v.default=s.exports}}]);